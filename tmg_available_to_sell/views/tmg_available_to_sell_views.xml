<odoo>
    <data>
<!--        <record id="tmg_available_to_sell_template_view" model="ir.ui.view">-->
<!--            <field name="name">tmg.available.to.sell.template.view</field>-->
<!--            <field name="model">product.template</field>-->
<!--            <field name="inherit_id" ref="product.product_template_only_form_view"></field>-->
<!--            <field name="arch" type="xml">-->
<!--                <xpath expr="//button[@name='%(stock.action_stock_level_forecast_report_template)d']"-->
<!--                       position="replace">-->
<!--                    <button type="object" name="action_open_quants"-->
<!--                            attrs="{'invisible':[('type', '!=', 'product')]}"-->
<!--                            class="oe_stat_button" icon="fa-building-o"-->
<!--                            modifiers="{'invisible':[['type','!=','product']]}"-->
<!--                            options="{}">-->
<!--                        <div class="o_field_widget o_stat_info" modifiers="{}">-->
<!--                            <span class="o_stat_value" modifiers="{}">-->
<!--                                <field name="virtual_available_qty" widget="statinfo" nolabel="1"-->
<!--                                       modifiers="{'readonly':true}"/>-->
<!--                                <field name="uom_name" class="ml4" modifiers="{'readonly':true}"/>-->
<!--                            </span>-->
<!--                            <span class="o_stat_text" modifiers="{}">-->
<!--                                Available Quantity-->
<!--                            </span>-->
<!--                        </div>-->
<!--                    </button>-->
<!--                </xpath>-->
<!--            </field>-->
<!--        </record>-->
        <record id="tmg_available_to_sell_product_tree" model="ir.ui.view">
            <field name="name">tmg.available.to.sell.product.tree</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="stock.view_stock_product_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//tree" position="attributes">
                     <attribute name="decoration-danger">type == 'product' and virtual_available_qty&lt;0</attribute>
                    <attribute name="decoration-info">type != 'product' or virtual_available_qty&gt;=0</attribute>
                </xpath>
                <xpath expr="//field[@name='virtual_available']" position="replace">
                    <field name="virtual_available_qty" attrs="{'invisible':[('type', '!=', 'product')]}"/>
                </xpath>
            </field>
        </record>
        <record id="tmg_product_template_kanban_stock_view" model="ir.ui.view">
            <field name="name">tmg.product.template.kanban.stock.view</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="stock.product_template_kanban_stock_view"/>
            <field name="arch" type="xml">
                <xpath expr="//ul" position="replace">
                    <ul>
                        <li t-if="record.type.raw_value == 'product'">Available: <field name="virtual_available_qty"/> <field name="uom_id"/></li>
                    </ul>
                </xpath>
            </field>
        </record>
        <record id="tmg_product_template_stock_tree_inherit" model="ir.ui.view">
            <field name="name">tmg.product.template.stock.tree.inherit</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="stock.view_stock_product_template_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//tree[1]" position="attributes">
                    <attribute name="decoration-danger"></attribute>
                    <attribute name="decoration-info"></attribute>
                </xpath>
                <xpath expr="//field[@name='qty_available']" position="replace">
                </xpath>
                <xpath expr="//field[@name='virtual_available']" position="replace">
                    <field name="virtual_available_qty" attrs="{'invisible':[('type', '!=', 'product')]}"/>
                </xpath>
            </field>
        </record>
    </data>
</odoo>